(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ec4061e"],{"0c12":function(e,t,r){"use strict";var a=r("2b0e");t["a"]=new a["default"]},"0f0e":function(e,t,r){"use strict";var a=r("ef71"),o=r.n(a);o.a},7424:function(t,r,a){"use strict";a.r(r);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-setting"},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("my-bread",[e._v("个人设置")])],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"编号:"}},[e._v(e._s(e.ruleForm.id))]),r("el-form-item",{attrs:{label:"手机:"}},[e._v(e._s(e.ruleForm.mobile))]),r("el-form-item",{attrs:{label:"媒体名称:"}},[r("el-input",{staticStyle:{width:"400px"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"媒体介绍:"}},[r("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:e.ruleForm.intro,callback:function(t){e.$set(e.ruleForm,"intro",t)},expression:"ruleForm.intro"}})],1),r("el-form-item",{attrs:{label:"邮箱:"}},[r("el-input",{staticStyle:{width:"400px"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"http-request":e.uploadAvatar}},[e.ruleForm.photo?r("img",{staticClass:"avatar",attrs:{src:e.ruleForm.photo}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1)},n=[],s=(a("b0c0"),a("96cf"),a("1da1")),l=a("5f87"),i=a("0c12"),u={name:"page-setting",data:function(){return{ruleForm:{name:"",intro:"",email:"",photo:""},headers:{Authorization:"Bearer ".concat(l["a"].getUser().token)}}},created:function(){this.getSetting()},methods:{getSetting:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/user/profile");case 2:r=t.sent,e.ruleForm=r.data.data;case 4:case"end":return t.stop()}}),t)})))()},save:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,o,n,s,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=t.ruleForm,o=a.name,n=a.intro,s=a.email,r.next=4,t.$http.patch("user/profile",{name:o,intro:n,email:s});case 4:t.$message.success("保存设置成功"),i["a"].$emit("updateUserName",o),u=l["a"].getUser(),u.name=o,l["a"].setUser(u),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),e.response&&409===e.response.status?t.$message.error("媒体名称已存在"):t.$message.error("保存设置失败");case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},uploadSuccess:function(e){this.ruleForm.photo=e.data.url},uploadAvatar:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,o,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.file,r.prev=1,o=new FormData,o.append("photo",a),r.next=6,t.$http.patch("user/photo",o);case 6:n=r.sent,t.$message.success("修改头像成功"),t.ruleForm.photo=n.data.data.photo,i["a"].$emit("updateUserPhoto",t.ruleForm.photo),s=l["a"].getUser(),s.photo=t.ruleForm.photo,l["a"].setUser(s),r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](1),t.$message.error("修改头像失败");case 18:case"end":return r.stop()}}),r,null,[[1,15]])})))()}}},c=u,m=(a("0f0e"),a("2877")),p=Object(m["a"])(c,o,n,!1,null,"fbe94754",null);r["default"]=p.exports},ef71:function(e,t,r){}}]);
//# sourceMappingURL=chunk-7ec4061e.e011bc42.js.map