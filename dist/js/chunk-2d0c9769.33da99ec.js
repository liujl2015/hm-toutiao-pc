(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c9769"],{"58f6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-comment"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("my-bread",[e._v("评论管理")])],1),a("el-table",{attrs:{data:e.articles}},[a("el-table-column",{attrs:{label:"文章标题",prop:"title"}}),a("el-table-column",{attrs:{label:"总评论数",prop:"total_comment_count"}}),a("el-table-column",{attrs:{label:"粉丝评论数",prop:"fans_comment_count"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.comment_status?"已打开":"已关闭")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.comment_status?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.toToggleStatus(t.row)}}},[e._v("关闭评论")]):a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.toToggleStatus(t.row)}}},[e._v("打开评论")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next,sizes","page-sizes":[10,20,30,40,50],"current-page":e.reqParams.page,"page-size":e.reqParams.per_page,total:e.total},on:{"current-change":e.changePager,"size-change":e.handleSizeChange}})],1)],1)},n=[],s=(a("96cf"),a("1da1")),c={data:function(){return{reqParams:{page:1,per_page:20,response_type:"comment"},articles:[],total:0}},created:function(){this.getArticles()},methods:{getArticles:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("articles",{params:e.reqParams});case 2:a=t.sent,e.articles=a.data.data.results,e.total=a.data.data.total_count;case 5:case"end":return t.stop()}}),t)})))()},changePager:function(e){this.reqParams.page=e,this.getArticles()},handleSizeChange:function(e){this.reqParams.page=1,this.reqParams.per_page=e,this.getArticles()},toToggleStatus:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=!e.comment_status,n=r?"此操作会开启该文章的评论功能，您确认吗？":"此操作会关闭该文章的评论功能，关闭后用户将无法对该文章进行评论，您确认吗？",t.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.put("comments/status?article_id="+e.id,{allow_comment:r});case 3:n=r?"打开评论成功":"关闭评论成功",t.$message({type:"success",message:n}),t.getArticles(),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),s=r?"开评论失败":"打关闭评论失败",t.$message({type:"info",message:s});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))).catch((function(){}));case 3:case"end":return a.stop()}}),a)})))()}}},o=c,l=a("2877"),u=Object(l["a"])(o,r,n,!1,null,"3f274a0c",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0c9769.33da99ec.js.map